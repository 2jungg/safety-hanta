apiVersion: apps/v1
kind: Deployment
metadata:
  name: streamer
  labels:
    app: streamer
spec:
  replicas: 1
  selector:
    matchLabels:
      app: streamer
  template:
    metadata:
      labels:
        app: streamer
    spec:
      containers:
      - name: streamer
        image: cosmos-reason1-server:latest
        imagePullPolicy: IfNotPresent
        command: ["python3", "-u", "src/streamer/main.py"]
        env:
        - name: REDIS_HOST
          value: "redis-service"
        - name: REDIS_PORT
          value: "6379"
        - name: PROCESSED_FPS
          value: "5" # Downsample if needed, or keep original.
        - name: RTSP_URLS
          value: "rtsp://mediamtx-service:8554/cam0,rtsp://mediamtx-service:8554/cam1,rtsp://mediamtx-service:8554/cam2,rtsp://mediamtx-service:8554/cam3,rtsp://mediamtx-service:8554/cam4,rtsp://mediamtx-service:8554/cam5,rtsp://mediamtx-service:8554/cam6,rtsp://mediamtx-service:8554/cam7,rtsp://mediamtx-service:8554/cam8,rtsp://mediamtx-service:8554/cam9"
